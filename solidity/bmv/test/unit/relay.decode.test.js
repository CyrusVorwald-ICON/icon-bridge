const DataValidator = artifacts.require("DataValidator");
const truffleAssert = require('truffle-assertions');

contract('Data validator relaymessage BMV passthrough tests', (accounts) => { 
    before(async () => {
        accounts = await web3.eth.getAccounts();
        console.log(accounts[0]);
        console.log(await web3.eth.getBalance(accounts[0]));
        //dataValidator = await DataValidator.deployed();
        dataValidator = await DataValidator.new();
        await DataValidator.setAsDeployed(dataValidator);
    });
 

    //test scenario: handlerelaymessage method 
    it(`Scenario 1: Handle Relay Message - Success`, async () => {
        let relayMsg="-QY--QGVuQGS-QGPuQET-QEQAoICD4cF2IXjRTlRlQAnXBGGF2EOZbpXKsCmId3RMlUkK6ADt6f80H1rvQGLeUbGoF0XgF-Sz6tUnl9ZspCL6wY2CKCnG6LOYklQM80z3xFKaVwWq9oKXrMwt5WVpdpddRid36CtxTN2kAt-pE-iTQUZ-J-9-UKz4pUMzkwRQ6dCLLPjrPgA-AC4PQgAIEAIKAYKACBCARCIbDhBDoSAoNEQBEIrGIxF4zHI7HYnHoLIJDJIKBI7J5DB5DJ43JYKgIbCgBMYrAS4RvhEoKTNC3mF0zasfs_hNQcHkv-wHrus0YeZ40NDdNCWBbO_-ACgxqCIKMAhLvY204hpiWuSG1lMZenNlWPdvN56wLxvuiC4dfhzAOIBoEAmRRTQ7CBRrdXHoKqLqpoMg6dgDlQGoWmZMAiKczF9-E34S4cF2IXjVHxcuEFC56JG535dVt8-cRYYHGagAIG4Spq7xvK0pj4c_TDcpk9Q7Gz-LxY2xx9q2GOlGHSfYznydIk92JYroLnp8iuXAfgA-AD5BKG5BJ75BJsAuQFP-QFMuQFJ-QFGgiAAuQFA-QE9AJUBpe2J-iyuryiCvL3npQATD207HHKDAvv3gwL79wC49hAAEAAAAAABAAAAQAAAAAgAAAAAAAAAAAAAAAAgAAAAAAAAQAIAAAEAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAABAAgAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAEAAAIAAAAAAAAAAAPgA-ACgCrv_tUQEBizUkJT-Podw9Yxxks5l5-BaXkml8Ee-HVT5Af_5AfwAuQH4-QH1o-IQoCDvlDCOXazBf5R7YIw40E3pbaJhNR62rjxQIkPJ-V1puFP4UaAZGljhBvcBQ9tAne25QFI_rvJBah8p2bjlGDBUgumM1qA-JIJnmfirA4cB1ksLPW4sLhRzT_jCD5BIn0NJGoYBBYCAgICAgICAgICAgICAgLkBefkBdiC5AXL5AW-VAdszPtWT2M2a_Gf3-RrtiQIBN1Zk-FOWTWVzc2FnZShzdHIsaW50LGJ5dGVzKbg5YnRwOi8vMHg5Ny5ic2MvMHhBYUZjOEVlYUVFOGQ5QzhiRDMyNjJDQ0UzRDczRTU2RGVFM0ZCNzc2AvkBAbj_-P24PmJ0cDovLzB4OTU0YWEzLmljb24vY3hkYjMzM2VkNTkzZDhjZDlhZmM2N2Y3ZjkxYWVkODkwMjAxMzc1NjY0uDlidHA6Ly8weDk3LmJzYy8weEFhRmM4RWVhRUU4ZDlDOGJEMzI2MkNDRTNENzNFNTZEZUUzRkI3NzaIVG9rZW5CU0gBuHb4dAC4cfhvqmh4MzRiZjA3ZGE1MDMzNDY1MWUzOTdlMDMyNzIxYmIwMDljNmVkZDk4ZKoweGViY2JkNGE5MzRhNjg1MTBlMjFiYTI1YjJhODI3MTM4MjQ4YTYzZTXY14NFVEiJAIlj3YwsXgAAiAFjRXhdigAAuQFD-QFA-QE9uDlidHA6Ly8weDk3LmJzYy8weEFhRmM4RWVhRUU4ZDlDOGJEMzI2MkNDRTNENzNFNTZEZUUzRkI3NzYCuP_4_bg-YnRwOi8vMHg5NTRhYTMuaWNvbi9jeGRiMzMzZWQ1OTNkOGNkOWFmYzY3ZjdmOTFhZWQ4OTAyMDEzNzU2NjS4OWJ0cDovLzB4OTcuYnNjLzB4QWFGYzhFZWFFRThkOUM4YkQzMjYyQ0NFM0Q3M0U1NkRlRTNGQjc3NohUb2tlbkJTSAG4dvh0ALhx-G-qaHgzNGJmMDdkYTUwMzM0NjUxZTM5N2UwMzI3MjFiYjAwOWM2ZWRkOThkqjB4ZWJjYmQ0YTkzNGE2ODUxMGUyMWJhMjViMmE4MjcxMzgyNDhhNjNlNdjXg0VUSIkAiWPdjCxeAACIAWNFeF2KAAA="
        let buff = new Buffer(relayMsg,'base64');
        var tx = await dataValidator.validateReceipt(
            "0x0000000000000000000000000000000000000000000000000000000000000001",
            "btp://0x954aa3.icon/cxdb333ed593d8cd9afc67f7f91aed890201375664",
            1,
            buff,
            "0x0000000000000000000000000000000000000000000000000000000000000001"

        )
        console.log(tx)
    });
});